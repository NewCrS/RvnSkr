<!DOCTYPE html>
<html>
<head>
    <title>ƒêang chuy·ªÉn h∆∞·ªõng - Phase Shift</title>
    <style>
        body {
            background: #000;
            color: #00BBFF;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
<h1>[PROCESSING REDIRECTION...]</h1>

<script>
    // =========================================================
    // ‚úÖ B∆Ø·ªöC 1: KHAI B√ÅO T·∫§T C·∫¢ C√ÅC ID B√ç M·∫¨T T·∫†I ƒê√ÇY
    // Th√™m custom ID b·∫±ng c√°ch th√™m m·ªôt c·∫∑p 'M√É_ƒê·ªäNH_DANH': { d·ªØ li·ªáu... }
    // =========================================================
    const SECRET_PROFILES = {
        // ID B√ç M·∫¨T ƒê·∫¶U TI√äN (V√≠ d·ª• c≈©)
        "12072008": {
            intro: "üî• Crush üî•",
            info: `
                Had crush on her since 2022.
            `,
            image: "crush.png" // ƒê·∫£m b·∫£o URL ·∫£nh ƒë√∫ng
        },
        
        // ID B√ç M·∫¨T TH·ª® HAI (V√≠ d·ª• m·ªõi, b·∫°n ch·ªâ c·∫ßn thay ƒë·ªïi n·ªôi dung n√†y)
        "ADMIN_999": {
            intro: "üëë TRUY C·∫¨P ƒê·∫¶Y ƒê·ª¶ - OVERRIDE üëë",
            info: `
                Quy·ªÅn truy c·∫≠p h·ªá th·ªëng ƒë√£ ƒë∆∞·ª£c c·∫•p.<br>
                M√£ ƒë·ªãnh danh: ADMIN_999.<br>
                **TR·∫†NG TH√ÅI:** T·∫§T C·∫¢ MODULE ONLINE.
            `,
            image: "assets/admin_icon.png" // Thay b·∫±ng ·∫£nh kh√°c
        },
        
        // ID B√ç M·∫¨T TH·ª® BA
        "ALPHA_TEST": {
            intro: "üß™ KHU V·ª∞C TH·ª¨ NGHI·ªÜM üß™",
            info: `
                M√£ truy c·∫≠p: ALPHA_TEST.<br>
                Vui l√≤ng kh√¥ng ph√° ho·∫°i khi ƒëang th·ª≠ nghi·ªám!
            `,
            image: "assets/test_subject.jpg"
        }
        
        // ********************************************************
        // ‚úÖ TH√äM ID M·ªöI D·ªÑ D√ÄNG:
        // "ID_M·ªöI_C·ª¶A_B·∫†N": { intro: "...", info: "...", image: "..." }
        // ********************************************************
    };

    // =========================================================
    // ‚úÖ B∆Ø·ªöC 2: C·∫§U H√åNH TH√îNG B√ÅO L·ªñI CHUNG
    // =========================================================
    const ACCESS_DENIED_PROFILE = {
        intro: "‚ùå KH√îNG ƒê∆Ø·ª¢C PH√âP",
        info: (id) => `
            M√£ ƒë·ªãnh danh **${id}** kh√¥ng t·ªìn t·∫°i trong c∆° s·ªü d·ªØ li·ªáu Core.<br>
            Truy c·∫≠p b·ªã **C·∫§M**!
        `,
        image: "assets/error_icon.png" // ·∫¢nh cho l·ªói
    };
    
    // =========================================================
    // B∆Ø·ªöC 3: X·ª¨ L√ù CHUY·ªÇN H∆Ø·ªöNG V√Ä KI·ªÇM TRA
    // =========================================================
    const params = new URLSearchParams(window.location.search);
    
    // ID ng∆∞·ªùi d√πng nh·∫≠p, chuy·ªÉn sang ch·ªØ hoa ƒë·ªÉ so s√°nh
    const rawId = params.get('id'); 
    const id = rawId ? rawId.toUpperCase() : null; 
    
    const target = params.get('target');
    const popupType = sessionStorage.getItem('tempPopupType');

    if (id && target && popupType) {
        
        // 1. D·ªçn d·∫πp session v√† thi·∫øt l·∫≠p c·ªù chuy·ªÉn ti·∫øp
        sessionStorage.setItem('secretPopupKey', popupType); 
        sessionStorage.setItem('isForwarded', 'true');
        sessionStorage.removeItem('tempPopupType');

        const finalSearchParams = new URLSearchParams();
        
        // Lu√¥n truy·ªÅn l·∫°i ID v√† Target 
        finalSearchParams.append('id', id);
        finalSearchParams.append('target', target);
        
        let profile;

        // 2. KI·ªÇM TRA ID TRONG C√ÅC H·ªí S∆† B√ç M·∫¨T
        if (SECRET_PROFILES[id]) {
            profile = SECRET_PROFILES[id];
            console.log(`ID Match: ${id}. Sending secret data.`);
        } else {
            // 3. N·∫æU KH√îNG KH·ªöP: G·ª≠i th√¥ng b√°o c·∫•m
            profile = ACCESS_DENIED_PROFILE;
            console.log(`ID Mismatch: ${id}. Sending access denied data.`);
        }

        // 4. ƒê√ìNG G√ìI D·ªÆ LI·ªÜU
        // D√πng profile.info(id) n·∫øu l√† h√†m (cho l·ªói) ho·∫∑c profile.info n·∫øu l√† chu·ªói (cho h·ªì s∆°)
        const infoDetail = typeof profile.info === 'function' ? profile.info(id) : profile.info;
        
        const intro = encodeURIComponent(profile.intro);
        const ident = encodeURIComponent(profile.image); 
        const info = encodeURIComponent(infoDetail); 
        
        finalSearchParams.append('INTRODUCTION', intro);
        finalSearchParams.append('IDENTIFICATION', ident);
        finalSearchParams.append('INFORMATION', info);
        
        // 5. Chuy·ªÉn h∆∞·ªõng v·ªÅ trang ƒë√≠ch (index.html) k√®m theo c√°c tham s·ªë
        const finalURL = target + '?' + finalSearchParams.toString(); 
        window.location.replace(finalURL);
        
    } else {
        // Tr∆∞·ªùng h·ª£p l·ªói: chuy·ªÉn h∆∞·ªõng v·ªÅ trang ch·ªß m√† kh√¥ng k√≠ch ho·∫°t popup
        window.location.replace('./');
    }
</script>

</body>
</html>
